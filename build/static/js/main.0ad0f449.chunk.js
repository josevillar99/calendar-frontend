(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{111:function(e,t,a){},14:function(e){e.exports=JSON.parse('{"serverURLRoot":"https://intimidating-forts.000webhostapp.com/calendar/"}')},152:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=a(29),s=a(11),u=a(19),i=a(5),p=a(4),m=a.n(p),d=a(7),b=a(10),f=a(24),v=function(e){var t=e.id,a=e.user,n=e.total,c=(e.history,new f.a);return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand"},a?a.name:""),r.a.createElement("span",{className:"resumen-span resumen-mobile"}," RESUMEN: ",n,"\u20ac"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item ".concat("calendar"==t?"active":""," ")},r.a.createElement(l.b,{to:"/",className:"nav-link"},"Calendar")),r.a.createElement("li",{className:"nav-item ".concat("filtros"==t?"active":""," ")},r.a.createElement(l.b,{to:"/filtros",className:"nav-link"},"Filtros")),5==a.id&&r.a.createElement("li",{clasName:"nav-item ".concat("admin"==t?"active":""," ")},r.a.createElement(l.b,{to:"/",className:'nav-link" '},"Admin")),r.a.createElement("li",{className:"nav-item resumen-sticky"},r.a.createElement("span",{className:"nav-link resumen-span"},"RESUMEN: ",n,"\u20ac"))),r.a.createElement("span",null,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){c.remove("token"),window.location.reload()}},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Salir"))))},E=a(41),h=a(42);function O(){var e=Object(E.a)(["\n    margin-top: 30px;\n    width: 90vw;\n"]);return O=function(){return e},e}function g(){var e=Object(E.a)(["\n    z-index: 3;\n    width: 100%;\n    /* position: relative; */\n    padding: 8px 24px;\n    /* display: flex; */\n    /* flex-direction: column; */\n    background-color: lightgray;   \n    display: block;\n    \n"]);return g=function(){return e},e}function x(){var e=Object(E.a)(["\n    display: block;\n    padding: 5px 30px;\n    /* position: relative; */\n    z-index: 1;\n"]);return x=function(){return e},e}var k=h.a.div(x()),D=h.a.div(g()),N=h.a.table(O()),w=a(13),j=a.n(w),S=a(14),y=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("evento","getEventosBy"),n.append("sql1",t),n.append("sql2",a),e.prev=4,e.next=7,j.a.post(S.serverURLRoot+"/index.php",n);case 7:if(!(r=e.sent).data){e.next=10;break}return e.abrupt("return",r.data);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return","1");case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("evento","getAllConceptos"),a.append("id",t),e.next=5,j.a.post(S.serverURLRoot,a,{headers:{"Content-Type":"multipart/form-data"}});case 5:if(!(n=e.sent).data){e.next=8;break}return e.abrupt("return",n.data);case 8:throw n.data;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("evento","addConcepto"),n.append("nombre",t),n.append("user",a),e.next=6,j.a.post(S.serverURLRoot,n,{headers:{"Content-Type":"multipart/form-data"}});case 6:return r=e.sent,e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("evento","login"),n.append("email",t),n.append("pass",a),e.prev=4,e.next=7,j.a.post(S.serverURLRoot+"/index.php",n);case 7:if(!(r=e.sent).data){e.next=10;break}return e.abrupt("return",r.data);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return","1");case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("evento","checkToken"),r.append("token",t),e.prev=3,e.next=6,j.a.post(S.serverURLRoot+"/index.php",r);case 6:if(!(c=e.sent).data){e.next=14;break}if(1===c.data.id||0===c.data.id){e.next=13;break}a.remove("token"),n.replace("/login"),e.next=14;break;case 13:return e.abrupt("return","ben");case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return","false");case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,a,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("evento","checkToken"),r.append("token",t),e.prev=3,e.next=6,j.a.post(S.serverURLRoot+"/index.php",r);case 6:if(!(c=e.sent)){e.next=18;break}if(1!=c.data.id){e.next=12;break}return e.abrupt("return",{id:1,name:"JoseV"});case 12:if(0!=c.data.id){e.next=16;break}return e.abrupt("return",{id:0,name:"DEMO"});case 16:a.remove("token"),n.replace("/login");case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(3),e.abrupt("return","false");case 23:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t,a,n){return e.apply(this,arguments)}}(),L=a(15),M=a.n(L),Y=(a(70),a(38)),_=a.n(Y);M.a.locale("es");var U=function(e){var t=e.history,a=Object(n.useState)({id:"",name:""}),c=Object(b.a)(a,2),o=c[0],l=c[1],s=new f.a,p=Object(n.useState)("0"),E=Object(b.a)(p,2),h=E[0],O=E[1],g=Object(n.useState)({date1:"",date2:"",number1:"",number2:"",concepto:""}),x=Object(b.a)(g,2),w=x[0],j=x[1],S=Object(n.useState)([{}]),T=Object(b.a)(S,2),C=T[0],A=T[1],L=Object(n.useState)([{}]),Y=Object(b.a)(L,2),U=Y[0],B=Y[1],I=Object(n.useState)([{}]),J=Object(b.a)(I,2),V=J[0],H=J[1];Object(n.useEffect)((function(){s.get("token")?q():t.replace("/login")}),[w]),Object(n.useEffect)((function(){_.a.init({duration:2e3}),s.get("token")?z():t.replace("/login")}),[]);var z=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.get("token")){e.next=7;break}return e.next=3,F(s.get("token"),s,t);case 3:a=e.sent,l(a),G(a),setTimeout((function(){q()}),400);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:(a=e.sent)&&H(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="",n="",r=0,r=void 0!=t?t:h,console.log(o),e.t0=r,e.next="0"===e.t0?8:"1"===e.t0?11:"2"===e.t0?13:"3"===e.t0?15:17;break;case 8:return a="SELECT e.*, c.nombre FROM eventos AS e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 and id_usuario = "+o.id+" ORDER BY DATE DESC;",n="SELECT SUM(total) as tot FROM eventos AS e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 and id_usuario = "+o.id+" ORDER BY DATE DESC;",e.abrupt("break",17);case 11:return""!=w.date1&&""===w.date2?(a='Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE >= "'+w.date1+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;",n='Select  SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE >= "'+w.date1+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;"):""===w.date1&&""!=w.date2?(a='Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE <= "'+w.date2+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;",n='Select  SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE <= "'+w.date2+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;"):""!=w.date1&&""!=w.date2?(a='Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE >= "'+w.date1+'" && DATE <= "'+w.date2+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;",n='Select SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && DATE >= "'+w.date1+'" && DATE <= "'+w.date2+'" and id_usuario = '+o.id+" ORDER BY DATE DESC;"):a=!1,e.abrupt("break",17);case 13:return""!=w.number1&&""!=w.number2?(a="Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total >= "+w.number1+" && total <= "+w.number2+" and id_usuario = "+o.id+" ORDER BY DATE DESC;",n="Select SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total >= "+w.number1+" && total <= "+w.number2+" and id_usuario = "+o.id+" ORDER BY DATE DESC;"):""!=w.number1&&""===w.number2?(a="Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total >= "+w.number1+"  and id_usuario = "+o.id+" ORDER BY DATE DESC;",n="Select SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total >= "+w.number1+"  and id_usuario = "+o.id+" ORDER BY DATE DESC;"):""===w.number1&&""!=w.number2?(a="Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total <= "+w.number2+" and id_usuario = "+o.id+" ORDER BY DATE DESC;",n="Select SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && total <= "+w.number2+" and id_usuario = "+o.id+" ORDER BY DATE DESC;"):a=!1,e.abrupt("break",17);case 15:return"0"!=w.concepto?(a="Select e.*, c.nombre from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && c.id = "+w.concepto+" and id_usuario = "+o.id+" ORDER BY DATE DESC;",n="Select SUM(total) as tot from eventos e LEFT JOIN conceptos c ON e.concepto = c.id where activo = 1 && c.id = "+w.concepto+" and id_usuario = "+o.id+" ORDER BY DATE DESC;"):a=!1,e.abrupt("break",17);case 17:if(0==a){e.next=25;break}return e.next=20,y(a,n);case 20:c=e.sent,console.log(c),c?(A(c[1]),B(Math.round(100*c[0].tot)/100)):A([{}]),e.next=26;break;case 25:A([{}]);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{id:"calendar",user:o}),r.a.createElement(k,null,r.a.createElement("div",{className:"row"},r.a.createElement(D,{className:"col-md-4 col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Filtros"),r.a.createElement("select",{className:"form-control",onChange:function(e){O(e.target.value),q(e.target.value)}},r.a.createElement("option",{value:"",selected:!0,disabled:!0},"Selecciona..."),r.a.createElement("option",{value:"0"},"Mostrar Todo"),r.a.createElement("option",{value:"1"},"Filtrar por Fechas"),r.a.createElement("option",{value:"2"},"Filtrar por Dinero"),r.a.createElement("option",{value:"3"},"Filtrar por Concepto")))),r.a.createElement(D,{className:"col-md-4 col-12"},"1"===h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Desde"),r.a.createElement("input",{className:"form-control",type:"date",value:w.date1,onChange:function(e){return j(Object(i.a)(Object(i.a)({},w),{},Object(u.a)({},"date1",e.target.value)))}})),"2"===h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Desde"),r.a.createElement("input",{className:"form-control",type:"number",value:w.number1,onChange:function(e){return j(Object(i.a)(Object(i.a)({},w),{},Object(u.a)({},"number1",e.target.value)))}})),"3"===h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Concepto"),r.a.createElement("select",{className:"form-control",onChange:function(e){return j(Object(i.a)(Object(i.a)({},w),{},Object(u.a)({},"concepto",e.target.value)))}},r.a.createElement("option",{value:"0",selected:!0,disabled:!0},"Selecciona..."),V&&V.map((function(e,t){return r.a.createElement("option",{value:e.id},e.nombre)}))))),r.a.createElement(D,{className:"col-md-4 col-12"},"1"===h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Hasta"),r.a.createElement("input",{className:"form-control",type:"date",value:w.date2,onChange:function(e){return j(Object(i.a)(Object(i.a)({},w),{},Object(u.a)({},"date2",e.target.value)))}})),"2"===h&&r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Hasta"),r.a.createElement("input",{className:"form-control",type:"number",value:w.number2,onChange:function(e){return j(Object(i.a)(Object(i.a)({},w),{},Object(u.a)({},"number2",e.target.value)))}})))),r.a.createElement(N,{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Fecha"),r.a.createElement("th",{scope:"col"},"Titulo"),r.a.createElement("th",{scope:"col"},"Concepto"),r.a.createElement("th",{scope:"col"},"Total"))),r.a.createElement("tbody",null,C&&!Array.isArray(C)&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4,className:"tableEmpty"},r.a.createElement("h3",null,"No se encuentran datos"))),C&&Array.isArray(C)&&C.map((function(e,t){return 1===C.length&&void 0===e.title||0==C.length?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:4,className:"tableEmpty"},r.a.createElement("h3",null,"No se encuentran datos"))):""===e.title||void 0===e.title?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,0==t&&r.a.createElement("tr",{style:{backgroundColor:"#f20adf"}},r.a.createElement("td",{colSpan:4,style:{textAlign:"center",fontWeight:"bold"}},"TOTAL: ",U,"\u20ac")),r.a.createElement("tr",{key:t,className:" ".concat(e.total.replace(",",".")>0?"verde":"rojo"," ")},r.a.createElement("td",null,M()(e.date).format("DD [de] MMMM [del] YYYY")),r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.nombre),r.a.createElement("td",null,e.total)))}))))))},B=(a(111),function(e){var t=e.history,a=new f.a,c=Object(n.useState)({email:"",pass:""}),o=Object(b.a)(c,2),l=o[0],s=o[1],u=function(){var e=Object(d.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===l.email||""===l.pass){e.next=6;break}return e.next=4,C(l.email,l.pass);case 4:"false"!==(r=e.sent)&&(Array.isArray(r),a.set("token",r),t.replace("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container login-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 login-form-1"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Correo",value:l.email,onChange:function(e){return s(Object(i.a)(Object(i.a)({},l),{},{email:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",value:l.pass,onChange:function(e){return s(Object(i.a)(Object(i.a)({},l),{},{pass:e.target.value}))}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",className:"btnSubmit",value:"Login",onClick:u}))))))}),I=a(58),J=a(30),V=a.n(J),H={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},z=V.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0}),G=function(e){var t=e.event;return r.a.createElement("small",{id:"calendarEvent"},t.title," ",r.a.createElement("br",null)," ",""==t.total?"precio desconocido":t.total+"\u20ac")},q=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("evento","newEvento"),r.append("title",t.title),r.append("start",t.start),r.append("end",t.end),r.append("concepto",t.concepto.value),r.append("total",t.total),r.append("dateStart",n),r.append("id_usuario",a),e.prev=9,e.next=12,j.a.post(S.serverURLRoot+"/index.php",r);case 12:if(!(c=e.sent).data){e.next=15;break}return e.abrupt("return",c.data);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return","1");case 21:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,a,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("evento","getEventos"),a.append("id",t),e.prev=3,e.next=6,j.a.post(S.serverURLRoot+"/index.php",a);case 6:if(!(n=e.sent).data){e.next=9;break}return e.abrupt("return",n.data);case 9:return e.abrupt("return",!1);case 12:return e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("evento","updateEvento"),n.append("title",t.title),n.append("start",t.start),n.append("end",t.end),n.append("concepto",t.concepto.value),n.append("total",t.total),n.append("id",t.id),n.append("dateStart",a),e.prev=9,e.next=12,j.a.post(S.serverURLRoot+"/index.php",n);case 12:if(r=e.sent,console.log(r),0!=r.data){e.next=16;break}return e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 19:return e.prev=19,e.t0=e.catch(9),console.log(e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("evento","deleteEvento"),a.append("id",t),e.prev=3,e.next=6,j.a.post(S.serverURLRoot+"/index.php",a);case 6:if(!(n=e.sent).data){e.next=9;break}return e.abrupt("return",n.data);case 9:return e.abrupt("return",!1);case 12:return e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("evento","getTotal"),n.append("mes",t),n.append("ano",a),e.prev=4,e.next=7,j.a.post(S.serverURLRoot+"/index.php",n);case 7:if(!(r=e.sent).data){e.next=10;break}return e.abrupt("return",r.data);case 10:return e.abrupt("return",!1);case 13:return e.prev=13,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a){return e.apply(this,arguments)}}(),X=a(55),Z=a.n(X),$=a(56),ee=a.n($),te=a(82);a(151);M.a.locale("es");var ae=Object(I.b)(M.a),ne={content:{top:"50%",left:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"10px",maxWidth:"80%",maxHeight:"80%"}};Z.a.setAppElement("#root");var re=M()().minutes(0).seconds(0).add(1,"hours"),ce=re.clone().add(3,"hours"),oe={title:"",notes:"",total:0,start:new Date(Date.parse(re.toDate())),end:new Date(Date.parse(ce.toDate())),dateStart:null},le=(new Date(Date.parse(re.clone().add(2,"hours").toDate())),new Date(Date.parse(re.clone().add(3,"hours").add(22,"minutes").toDate())),new Date(Date.parse(re.toDate())),new Date(Date.parse(ce.toDate())),new Date(Date.parse(re.clone().add(1,"days").toDate())),new Date(Date.parse(re.clone().add(1,"days").add(15,"hours").toDate())),function(e){var t=e.history,a=Object(n.useState)({id:"",name:""}),c=Object(b.a)(a,2),o=c[0],l=c[1],s=new f.a;Object(n.useEffect)((function(){_.a.init({duration:2e3}),p(),E()}),[]);var p=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.get("token")){e.next=6;break}return e.next=3,A(s.get("token"),s,t);case 3:e.sent,e.next=7;break;case 6:t.replace("/login");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.get("token")){e.next=8;break}return e.next=3,F(s.get("token"),s,t);case 3:a=e.sent,console.log(a),l(a),qe(a),Ge(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(n.useState)(null),O=Object(b.a)(h,2),g=O[0],x=O[1],k=Object(n.useState)([{}]),D=Object(b.a)(k,2),N=D[0],w=D[1],j=Object(n.useState)([]),S=Object(b.a)(j,2),y=S[0],C=S[1],L=Object(n.useState)(localStorage.getItem("lastView")||"month"),Y=Object(b.a)(L,2),U=Y[0],B=Y[1],J=Object(n.useState)("Desconocido"),X=Object(b.a)(J,2),$=X[0],le=X[1],se=Object(n.useState)(M()().format("MMM").substr(0,3)),ue=Object(b.a)(se,2),ie=ue[0],pe=ue[1],me=Object(n.useState)(M()().format("YYYY")),de=Object(b.a)(me,2),be=de[0],fe=(de[1],Object(n.useState)(!1)),ve=Object(b.a)(fe,2),Ee=ve[0],he=ve[1],Oe=Object(n.useState)(re.toDate()),ge=Object(b.a)(Oe,2),xe=ge[0],ke=ge[1],De=Object(n.useState)(ce.toDate()),Ne=Object(b.a)(De,2),we=Ne[0],je=Ne[1],Se=Object(n.useState)(!0),ye=Object(b.a)(Se,2),Re=ye[0],Te=ye[1],Ce=Object(n.useState)(!0),Ae=Object(b.a)(Ce,2),Fe=Ae[0],Le=Ae[1],Me=Object(n.useState)(oe),Ye=Object(b.a)(Me,2),_e=Ye[0],Ue=Ye[1],Be=(_e.notes,_e.title),Ie=_e.start,Je=_e.end,Ve=_e.concepto,He=_e.total;Object(n.useEffect)((function(){Pe()}),[ie]);var ze=function(e,t,a,n){return{style:{backgroundColor:e.total.replace(",",".")>0?"green":e.total.replace(",",".")<0?"red":"gray",borderRadius:"3px",display:"inline-block",color:"white",border:"none",borderColor:"transparent"}}},Ge=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.get("token")){e.next=3;break}return t.replace("/login"),e.abrupt("return");case 3:return e.next=5,P(a.id);case 5:(n=e.sent)&&Array.isArray(n)?(n.map((function(e,t){e.start=new Date(Date.parse(e.start)),e.end=new Date(Date.parse(e.end))})),w(n)):w([{}]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.get("token")){e.next=3;break}return t.replace("/login"),e.abrupt("return");case 3:if(n="",!a){e.next=10;break}return e.next=7,R(a.id,s.get("token"),s,t);case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,R(1,s.get("token"),s,t);case 12:n=e.sent;case 13:r=[],n&&Array.isArray(n)&&n.map((function(e,t){r.push({value:e.id,label:e.nombre})})),C(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.get("token")){e.next=3;break}return t.replace("/login"),e.abrupt("return");case 3:return e.next=5,Q(ie,be);case 5:(a=e.sent)&&le(Math.round(100*a.total)/100);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(e){var t=e.target;Ue(Object(i.a)(Object(i.a)({},_e),{},Object(u.a)({},t.name,t.value)))},Ke=function(){he(!1),x(null),Ue(oe),Le(!0),Te(!0)},Qe=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r,c,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),s.get("token")){e.next=4;break}return t.replace("/login"),e.abrupt("return");case 4:if(n=M()(Ie),r=M()(Je),c=M()(Ie).format("YYYY-MM-DD"),!n.isAfter(r)){e.next=9;break}return e.abrupt("return",V.a.fire("Error","La fecha fin debe de ser mayor a la fecha de inicio","error"));case 9:if(!(Be.trim().length<2)){e.next=11;break}return e.abrupt("return",Te(!1));case 11:if(!Ve||!Ve.value){e.next=16;break}if(0!=Ve.value){e.next=14;break}return e.abrupt("return",Le(!1));case 14:e.next=17;break;case 16:return e.abrupt("return",Le(!1));case 17:if(Le(!0),!g){e.next=26;break}return e.next=21,W(_e,c);case 21:l=e.sent,console.log("11-> "+l),l&&z.fire({icon:"success",title:"Actualizado correctamente."}),e.next=31;break;case 26:return e.next=28,q(_e,o.id,c,s.get("token"),s,t);case 28:u=e.sent,console.log(u),u&&z.fire({icon:"success",title:"A\xf1adido correctamente."});case 31:Ge(o),Te(!0),Ke();case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.get("token")){e.next=3;break}return t.replace("/login"),e.abrupt("return");case 3:if(!a){e.next=15;break}if(!a.__isNew__){e.next=12;break}return e.next=7,T(a.label,o.id);case 7:n=e.sent,Ue(Object(i.a)(Object(i.a)({},_e),{},{concepto:{value:n,label:a.label}})),qe(),e.next=13;break;case 12:Ue(Object(i.a)(Object(i.a)({},_e),{},{concepto:a}));case 13:e.next=16;break;case 15:Ue(Object(i.a)(Object(i.a)({},_e),{},{concepto:{value:0,label:"Select..."}}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=o.id){e.next=4;break}V.a.fire("Denegado","No tienes permisos","warning"),e.next=8;break;case 4:return e.next=6,K(g.id);case 6:"true"==e.sent&&(V.a.fire("Eliminado","","success"),Ge(o));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"calendar-screen"},r.a.createElement(v,{id:"calendar",user:o,total:$}),r.a.createElement(I.a,Object(u.a)({localizer:ae,events:N,startAccessor:"start",endAccessor:"end",messages:H,eventPropGetter:ze,onDoubleClickEvent:function(e){he(!0)},onSelectEvent:function(e){Ue(Object(i.a)(Object(i.a)({},e),{},{concepto:{value:e.concepto,label:e.nombre_concepto}})),x(e)},onView:function(e){B(e),localStorage.setItem("lastView",e)},onSelectSlot:function(e){x(null)},selectable:!0,defaultView:U,onNavigate:function(e){e.toString().includes("00:00:00")&&(Ue(Object(i.a)(Object(i.a)({},_e),{},{start:M()(e).minutes(0).seconds(0).add(12,"hours")._d,end:M()(e).minutes(0).seconds(0).add(15,"hours")._d})),ke(M()(e).minutes(0).seconds(0).add(12,"hours")._d),je(M()(e).minutes(0).seconds(0).add(15,"hours")._d),he(!0)),B("month");var t=new Date(e);pe(t.toLocaleString("en-us",{month:"short"}))},components:{event:G}},"eventPropGetter",ze)),r.a.createElement("button",{button:!0,className:"btn btn-primary fab",onClick:function(){Ue(Object(i.a)(Object(i.a)({},_e),{},{start:re.toDate(),end:ce.toDate()})),ke(re.toDate()),je(ce.toDate()),he(!0)}},r.a.createElement("i",{className:"fas fa-plus"})),g&&r.a.createElement("button",{className:"btn btn-danger fab-danger",onClick:Ze},r.a.createElement("i",{className:"fas fa-trash"}),r.a.createElement("span",null," Borrar evento ")),r.a.createElement(Z.a,{isOpen:Ee,onRequestClose:Ke,style:ne,closeTimeoutMS:200,className:"modal",overlayClassName:"modal-fondo"},r.a.createElement("h1",null," ",g?"Editar evento":"Nuevo evento"," "),r.a.createElement("hr",null),r.a.createElement("form",{"data-aos":"fade-right",className:"container",onSubmit:Qe},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xedtulo"),r.a.createElement("input",{type:"text",className:"form-control ".concat(!Re&&"is-invalid"," "),placeholder:"T\xedtulo del evento",name:"title",autoComplete:"off",value:Be,onChange:We})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fecha y hora inicio"),r.a.createElement(ee.a,{onChange:function(e){ke(e),Ue(Object(i.a)(Object(i.a)({},_e),{},{start:e}))},value:xe,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fecha y hora fin"),r.a.createElement(ee.a,{onChange:function(e){je(e),Ue(Object(i.a)(Object(i.a)({},_e),{},{end:e}))},value:we,minDate:xe,className:"form-control"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",null,r.a.createElement("label",null,"Concepto"),r.a.createElement(te.a,{isClearable:!0,onChange:Xe,className:" ".concat(!Fe&&"errorConcepto"," "),options:y,value:Ve}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Total"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Total",name:"total",autoComplete:"off",value:He,onChange:We})))),_e.concepto&&(6==_e.concepto.value||7==_e.concepto.value||8==_e.concepto.value)&&r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Notas"),r.a.createElement("textarea",{type:"text",className:"form-control",autoComplete:"off"})))),r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-block btnGuardar"},r.a.createElement("i",{className:"far fa-save"}),r.a.createElement("span",null," Guardar")))))}),se=function(){Object(n.useEffect)((function(){e()}),[]);var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData,e.next=3,j.a.post(S.serverURLRoot,t,{headers:{"Content-Type":"multipart/form-data"}});case 3:a=e.sent,console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,"No se muestra nada")},ue=function(){return r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/login",component:B}),r.a.createElement(s.b,{exact:!0,path:"/",component:le}),r.a.createElement(s.b,{exact:!0,path:"/filtros",component:U}),r.a.createElement(s.b,{exact:!0,path:"/tests",component:se}),r.a.createElement(s.a,{to:"/"}))))},ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null))};a(152);o.a.render(r.a.createElement(ie,null),document.getElementById("root"))},83:function(e,t,a){e.exports=a(154)}},[[83,1,2]]]);
//# sourceMappingURL=main.0ad0f449.chunk.js.map